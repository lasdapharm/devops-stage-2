# Full-Stack FastAPI and React Template

This project is a full stack web application with a React frontend(using ChakraUI) and a FastAPI + PostgreSQL backend. The application is deployed using Docker and Traefik as a reverse proxy.


## Project Structure

The repository is organized into two main directories:

- **frontend**: Contains the ReactJS application.
- **backend**: Contains the FastAPI application and PostgreSQL database integration.

Each directory has its own README file with detailed instructions specific to that part of the application.

## Getting Started

To get started with the MANUAL IMPLEMENTATION of this template, please follow the instructions in the respective directories:

- [Frontend README](./frontend/README.md)
- [Backend README](./backend/README.md)


## Prerequisites
- Docker
- Docker Compose
  
## Environment Variables

- Edit the env files to reflect your chosen variables: These are; `.env` (in the root directory), `backend/.env` and `frontend/.`

# Backend environment variables

```
DOMAIN=babbexx22.chickenkiller.com
POSTGRES_USER=app
POSTGRES_PASSWORD=changethis123
POSTGRES_SERVER=db
POSTGRES_PORT=5432
POSTGRES_DB=app
```
## Frontend environment variable 

` VITE_API_URL=https://babbexx22.chickenkiller.com `

## Root folder environment variable (.env):

```
DOMAIN=babbexx22.chickenkiller.com
TRAEFIK_ACME_EMAIL=meempharm22@gmail.com

```
## Setup Instructions

## Using Docker

- Clone the Repository
Clone the project repository to your local machine using the following command:

```
git clone https://github.com/yourusername/yourproject.git
cd yourproject

```

- Create the Required Directories
Create the letsencrypt directory to store the SSL certificates generated by Traefik: ` mkdir -p letsencrypt `

- Set Permissions for the letsencrypt Directory
Set the appropriate permissions for the letsencrypt directory to allow Traefik to write to it: `sudo chown 1000:1000 letsencrypt`

- Run Docker Compose
Use Docker Compose to build and start the containers defined in the docker-compose.yml file: `docker-compose up -d`


## Access the Application
Once the containers are running, you can access the application at the following URLs:

- Frontend: [https://babbexx22.chickenkiller.com](https://babbexx22.chickenkiller.com)
  
- Backend: [https://babbexx22.chickenkiller.com/docs](https://babbexx22.chickenkiller.com/docs) , [https://babbexx22.chickenkiller.com/redoc](https://babbexx22.chickenkiller.com/redoc) , [https://babbexx22.chickenkiller.com/api](https://babbexx22.chickenkiller.com/api)
  
- Adminer: [https://db.babbexx22.chickenkiller.com](https://db.babbexx22.chickenkiller.com)
  
- Traefik: [https://proxy.babbexx22.chickenkiller.com](https://proxy.babbexx22.chickenkiller.com)

## Requirements Fulfilled

- Dockerfiles were written to containerize both the React frontend and FastAPI backend. Each service can be built and run locally in their respective containers.
  
- Traefik is configured to: Serve the frontend and backend on the same host machine port (80), Serve the frontend on the root (/), Proxy /api on the backend to /api on the main domain, Proxy /docs on the backend to /docs on the main domain, Proxy /redoc on the backend to /redoc on the main domain.

- Database Configuration: The application is configured to use a PostgreSQL database,properly set up and connected.

- Adminer Setup: Adminer is configured to run on port 8080. Adminer is accessible via the subdomain db.babbexx22.chickenkiller.com and is properly connected to the PostgreSQL database.

- Proxy Manager Setup: Traefik (serving as the proxy manager) is configured to run on port 8090. Traefik's dashboard is also accessible via the subdomain `proxy.babbexx22.chickenkiller.com`.

- Cloud Deployment: The Dockerized application is deployed to an AWS EC2 instance. A domain (or free subdomain from Afraid DNS) is set up for the application, HTTP is configured to redirect to HTTPS and www is configured to redirect to non-www.
